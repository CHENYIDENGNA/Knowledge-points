1、DeciveMotionEvent

1.1概述

decvicemotionEvent可以给开发者提供设备物理方向及运动的信息，包括陀螺仪、罗盘及加速计。该事件周期性触发。（类似mouseover会一直触发？）

1.2事件属性

DevieMotionEvent.acceleration //该对象包括三个属性，分别为设备在x,y,z轴三个方向的加速度，单位 m/s2
var x,y,z;
x = event.acceleration.x;
y = event.acceleration.y;
z = evetn.acceleration.z;

DeviceMotionEvent.accelerationIncludingGravity //该对象包含三个属性，分别为设备在x,y,z轴三个方向上的重力加速度，单位为m/s2
var x,y,z;
x = event.accelerationIncludingGravity.x;
y = event.accelerationIncludingGravity.y;
z = evetn.accelerationIncludingGravity.z;

DeviceMotionEvent.rotationRate //该对象包含三个属性alpha,beta,gamma，分别为设备在沿着x,y,z三个方向上的旋转速率，
//An object giving the rate of change of the device's orientation on the three orientation axis alpha, beta and gamma. Rotation rate is express in degrees per seconds
var x,y,z;
x = event.rotationRate.alpha;
y = evetn.rotationRate.beta;
z = event.rotationRate.gamma;

DeviceMotionEvent.interval //devicemotionEvent事件触发的周期,手机上约为16.8ms
//The interval, in milliseconds, at which the DeviceMotionEvent is fired. The next event will be fired in approximately this amount of time.
1.3浏览器兼容性

PC端：chrome Edge firfox 6+

mobile：android Edge firfox6+ safari4.2+

1.4 应用demo

<script type="text/javascript">
    var SHAKE_THRESHOLD = 3000;
    var last_update = 0;
    var x = y = z = last_x = last_y = last_z = 0;
    function init() {
        if (window.DeviceMotionEvent) {
            window.addEventListener('devicemotion', deviceMotionHandler, false);
        } else {
            alert('not support mobile event');
        }
    }
    function deviceMotionHandler(eventData) {
        var acceleration = eventData.accelerationIncludingGravity;
        var curTime = new Date().getTime();
        //定义一个时间差，diffTime，由于该事件是间歇持续触发的，超过时间差后获取各值
        if ((curTime - last_update) > 100) {
            var diffTime = curTime - last_update;
            last_update = curTime;
            x = acceleration.x;
            y = acceleration.y;
            z = acceleration.z;
            var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 10000;
            if (speed > SHAKE_THRESHOLD) {
                
                //用来执行，摇动后的后续程序
                alert("摇动了");
                
            }
            last_x = x;
            last_y = y;
            last_z = z;
        }
    }
</script>
